FROM node:20-slim

# Install Java (required for Firestore emulator)
RUN apt-get update && apt-get install -y openjdk-11-jre-headless

WORKDIR /app

# Install Firebase CLI
RUN npm install -g firebase-tools

COPY firebase.json /app/firebase.json

EXPOSE 8080 5000 4400

CMD ["firebase", "emulators:start", "--only", "firestore,ui", "--project", "test-project"]